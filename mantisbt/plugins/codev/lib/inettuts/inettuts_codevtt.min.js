var iNettuts={jQuery:$,settings:{columns:".column",widgetSelector:".widget",handleSelector:".widget-head",contentSelector:".widget-content",widgetDefault:{movable:!0,removable:!0,collapsible:!0,editable:!0,colorClasses:["color-yellow","color-red","color-blue","color-white","color-orange","color-green"]},widgetIndividual:{intro:{movable:!1,removable:!1,collapsible:!1,editable:!1}}},init:function(){this.attachStylesheet("lib/inettuts/inettuts.js.css"),this.addWidgetControls(),this.makeSortable()},getWidgetSettings:function(t){var e=this.jQuery,i=this.settings;return t&&i.widgetIndividual[t]?e.extend({},i.widgetDefault,i.widgetIndividual[t]):i.widgetDefault},addWidgetControls:function(){var t=this,e=this.jQuery,i=this.settings;e(i.widgetSelector,e(i.columns)).each(function(){var n=t.getWidgetSettings(this.id);n.removable&&0===e(this).find(".remove").length&&e('<a href="#" class="remove">CLOSE</a>').mousedown(function(t){t.stopPropagation()}).click(function(){var t=e(this).parents(i.widgetSelector);return t.data("isSlidingUp",!0),t.animate({opacity:0},function(){e(this).wrap("<div/>").parent().slideUp(function(){var i=jQuery(t).find(".pluginDestroyFunction").text();""!==i&&window[i](),e(this).remove()})}),!1}).appendTo(e(i.handleSelector,this)),n.editable&&0===e(this).find(".edit").length&&(e('<a href="#" class="edit">EDIT</a>').mousedown(function(t){t.stopPropagation()}).toggle(function(){return e(this).css({backgroundPosition:"-66px 0",width:"55px"}).parents(i.widgetSelector).find(".edit-box").show().find("input").focus(),!1},function(){return e(this).css({backgroundPosition:"",width:""}).parents(i.widgetSelector).find(".edit-box").hide(),!1}).appendTo(e(i.handleSelector,this)),e('<div class="edit-box" style="display:none;"/>').append('<ul><li class="item"><label>Change the title?</label><input value="'+e("h3",this).text()+'"/></li>').append(function(){var t='<li class="item"><label>Available colors:</label><ul class="colors">';return e(n.colorClasses).each(function(){t+='<li class="'+this+'"/>'}),t+"</ul>"}()).append("</ul>").insertAfter(e(i.handleSelector,this))),n.collapsible&&0===e(this).find(".collapse").length&&e('<a href="#" class="collapse">COLLAPSE</a>').mousedown(function(t){t.stopPropagation()}).toggle(function(){return e(this).css({backgroundPosition:"-38px 0"}).parents(i.widgetSelector).find(i.contentSelector).hide(),!0},function(){return e(this).css({backgroundPosition:""}).parents(i.widgetSelector).find(i.contentSelector).show(),!0}).prependTo(e(i.handleSelector,this))}),e(".edit-box").each(function(){e("input",this).keyup(function(){e(this).parents(i.widgetSelector).find("h3").text(e(this).val().length>20?e(this).val().substr(0,20)+"...":e(this).val())}),e("ul.colors li",this).click(function(){var t=/\bcolor-[\w]{1,}\b/,n=e(this).parents(i.widgetSelector).attr("class").match(t);return n&&e(this).parents(i.widgetSelector).removeClass(n[0]).addClass(e(this).attr("class").match(t)[0]),!1})})},attachStylesheet:function(t){var e=this.jQuery;return e('<link href="'+t+'" rel="stylesheet" type="text/css" />').appendTo("head")},makeSortable:function(){var t=this,e=this.jQuery,i=this.settings,n=function(){var n="";return e(i.widgetSelector,e(i.columns)).each(function(e){t.getWidgetSettings(this.id).movable||(this.id||(this.id="widget-no-id-"+e),""!==n&&(n+=","),n+="#"+this.id)}),""!==n?e("> li:not("+n+")",i.columns):e("> li",i.columns)}();n.find(i.handleSelector).css({cursor:"move"}).mousedown(function(t){n.css({width:""}),e(this).parent().css({width:e(this).parent().width()+"px"})}).mouseup(function(){e(this).parent().hasClass("dragging")?e(i.columns).sortable("disable"):e(this).parent().css({width:""})}),e(i.columns).sortable({items:n,connectWith:e(i.columns),handle:i.handleSelector,placeholder:"widget-placeholder",forcePlaceholderSize:!0,revert:300,delay:100,opacity:.8,containment:"document",start:function(t,i){e(i.helper).addClass("dragging")},stop:function(t,n){e(n.item).css({width:""}).removeClass("dragging"),e(i.columns).sortable("enable")}})}};iNettuts.init();